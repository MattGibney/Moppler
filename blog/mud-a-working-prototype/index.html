<!doctype html>
<html lang="en">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><style>
  .project-card-thumbnail {
    max-height: 10rem;
    object-fit: cover
  }
  pre {
    padding: 1rem;
    border-radius: .25rem;
  }
</style>

<title>Moppler | Mud a Working Prototype</title>

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/brands.css" integrity="sha384-MiOGyNsVTeSVUjE9q/52dpdZjrr7yQAjVRUs23Bir5NhrTq0YA0rny4u/qe4dxNj" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/fontawesome.css" integrity="sha384-PRy/NDAXVTUcXlWA3voA+JO/UMtzWgsYuwMxjuu6DfFPgzJpciUiPwgsvp48fl3p" crossorigin="anonymous">

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" integrity="sha384-VCmXjywReHh4PwowAiWNagnWcLhlEJLA5buUprzK8rxFgeH0kww/aWY76TfkUoSX" crossorigin="anonymous"></head>
  <body><div class="container mt-5">
      <div class="row">
        <div class="col-5 col-sm-3"><img src="/avatar.png" class="img-fluid rounded-circle" alt="Moppler's Avatar">
<h1>Moppler</h1>
<p class="text-muted small">Writing terrible code since 2005.</p>

<hr>

<nav class="nav flex-column">
  
  
    <a class="nav-link" href="/" title="Home">Home</a>
  
    <a class="nav-link" href="/projects/" title="projects">Projects</a>
  
    <a class="nav-link" href="/blog/" title="blog section">Blog</a>
  
</nav>

<hr>

<div class="d-flex justify-content-center">
  <a href="https://github.com/Moppler" class="text-decoration-none text-body mx-1" target="_blank">
    <i class="h2 fab fa-github"></i>
  </a>
  <a href="https://www.youtube.com/channel/UCcB6TmKA3pDF0WTzkniBPlw" class="text-decoration-none text-danger mx-1" target="_blank">
    <i class="h2 fab fa-youtube"></i>
  </a>
  <a href="https://twitter.com/findmoppler" class="text-decoration-none text-info mx-1" target="_blank">
    <i class="h2 fab fa-twitter"></i>
  </a>
</div>
</div>
        <div class="col">
  

  <h2>Mud a Working Prototype</h2>
  <p class="small text-muted"><time datetime="2020-08-11T17:04:44Z">Tue Aug 11, 2020</time></p>

  <hr>
<p><a href="https://github.com/Moppler/TextAdventure-Server">Server</a>
|
<a href="https://github.com/Moppler/TextAdventure-Client">Client</a></p>
<hr>
<p>After quite a lot of experimenting as well as playing around with different
methods of communication between the client and the server, I finally settled on
something that seems to work.</p>
<p>Server asks: What would you like to do? and provides choices.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">{
  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;requestInstruction&#39;</span>,
  <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">availableInstructions</span><span style="color:#f92672">:</span> [
      { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Look&#39;</span>, <span style="color:#a6e22e">instruction</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;look&#39;</span> },
      {
        <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Move&#39;</span>,
        <span style="color:#a6e22e">instruction</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;move&#39;</span>,
        <span style="color:#a6e22e">arguments</span><span style="color:#f92672">:</span> [
      	  {
            <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;select&#39;</span>,
            <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;direction&#39;</span>,
            <span style="color:#a6e22e">playerPrompt</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Which Direction?&#34;</span>,
            <span style="color:#a6e22e">options</span><span style="color:#f92672">:</span> [
            	{ <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;North&#39;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;north&#39;</span> },
          		{ <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;East&#39;</span>, <span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;east&#39;</span> },
            ],
          },
      	],
      },
    ],
  },
}
</code></pre></div><p>The client responds with an instruction based on the players selection.</p>
<p>If the instruction requires no additional information, the server will provide
display information and then a new <code>requestInstruction</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// Client -&gt; Server
</span><span style="color:#75715e"></span>{
  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;issueInstruction&#39;</span>,
  <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">instructionType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;look&#39;</span>,
  }
}

<span style="color:#75715e">// Server -&gt; Client
</span><span style="color:#75715e"></span>{
  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;render&#39;</span>,
  <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">message</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;A description of the room you are in...&#39;</span>,
  }
}
</code></pre></div><p>Some instructions require additional information in the form of arguments. These
are supplied to the player with the <code>requestInstruction</code> message and can be
quite complex with a select option. They can also be simple with freetext input.</p>
<p>The goal of this structure is to leave the client in control of how the player
should interact with this information and instead only provide the tools to play
the game. It should be possible to construct a very simple client using this
structure, while leaving it open to improvements in the future.</p>


        </div>
      </div>
    </div></body>
</html>
